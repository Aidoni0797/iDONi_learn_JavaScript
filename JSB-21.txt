Веб-воркеры

Как уже говорилось выше, JavaScript выполняется в одном потоке. Браузер никогда не будет выполнять
два обработчика событий одновременно, и таймер никогда не сработает, пока выполняется обработчик
события. Параллельные обновления переменных приложения или документа невозможны. Однако "фоновые потоки",
определяемые спецификацией веб-воркеров, фактически являются паралельными потоками выполнения. Эти 
потоки выполняются в изолированной среде, не имеют доступа к объектам Window and Document и могут
взаимодействовать с основным потоком выполнения только посредством передачи асинхронных сообщений.
Таким образом, параллельные изменения дерева DOM по - прежнему невозможны, но можно писать функции,
выполняющиеся длительное время, которые не будут останавливать работу цикла событий и подвешивать
браузер. Создание нового фонового потока выполнения не является такой тяжеловесной операцией, как
открытие нового окна браузера, но также не является легковесной операцией, поэтому создавать новые
фоновые потоки следует для выполнения адекватных им задач.
Веб-воркер можно рассмотреть как удалённый компонент, которому можно послать сигнал и подписаться
на его обновления. Это модель "подписчик - издатель", предпологающая, что издатель играет некоторым
образом активную роль и посылает уведомления подписчику, когда что-то происходит (например, меняется
статус соединения считываются данные и т.п.).
С помощью worker.postMessage(info) мы посылаем сигнал воркеру, а с помощью 
worker.onmessage = e => {...} мы подписываемся на обновления, предпологая, что реализация воркера
вызовет этот коллбэк ии поместит в его формальный параметр полезные данные (payload).
Внутри воркера тоже находится такая подписка:
onmessage=e=>{...postMessage(info)...}
Он срабатывает в ответ на сигнал, посланный из основного сценария. Особенностью реализации является то,
что внутри воркера имеется некое пространство имён по умолчанию, в котором находятся метод 
postMessage и свойство onmessage, которое можно рассматривать как "местный" глобальный объект воркера.
С рассматриваемой темой тесно связаны атрибуты defer and async элемента script. Они оба сообщают
браузеру, что сценарий не использует метод document.write() и не генерирует содержимое документа и что
браузер может продолжать разбор и отображение документа, пока сценарий загружается. Атрибут defer 
указывает браузеру отложить выполнение сценария до момента, когда документ будет загружен,
проанализирован и станет готов к выполнению. Атрибут async предписывает выполнить сценарий, как только
это станет возможно, но не блокирует разбор документа на время загрузки сценария. Если представлены 
оба атрибта, браузер отдаст предпочтение атрибуту async и проигнорирует атрибут defer. Отложенные сценарии
исполняются в порядке их следования в документе, а асинхронные - как только будут загружены, т.е.
они могут выполняться в произвольном порядке.